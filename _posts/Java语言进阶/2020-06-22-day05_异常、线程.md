---
layout: post
title: "异常、线程"
subtitle: "「中断处理、自定义异常」"
author: "月明"
date:   2020-06-22 21:00:00
header-img: "assets/background2.png"
header-mask: 0.3
tags:
  - Java语言进阶
  - 学习笔记
  - 线程
  - 异常
---

# 异常，线程

> Java处理异常的方式是**中断处理**。

`java.lang.Throwable`：

`java.lang.Error` 与 `java.lang.Exception（异常）`

## 常用方法：

`public void printStackTrace()` :打印异常的详细信息。

> 包含了异常的类型,异常的原因,还包括异常出现的位置,在开发和调试阶段,都得使用printStackTrace。

`public String getMessage()` :获取发生异常的原因。
> 提示给用户的时候,就提示错误原因。

`public String toString()` :获取异常的类型和异常描述信息(不用)。

### 分类

* 编译时期异常:`checked异常`。在编译时期,就会检查,如果没有处理异常,则编译失败。(如日期格式化异常)

  *运行时期异常:``runtime异常`。在运行时期,检查异常.在编译时期,运行异常不会编译器检测(不报错)。(如数学异常)

### 处理

* `try…catch…ﬁnally`：Java中对异常有针对性的语句进行捕获，可以对出现的异常进行指定方式的处理。

> 在ﬁnally代码块中存放的代码都是一定会被执行的。当只有在try或者catch中调用退出JVM的相关方法,此时ﬁnally才不会执行,否则ﬁnally永远会执行。

* `throw`：throw用在方法内，用来抛出一个异常对象，将这个异常对象传递到调用者处，并结束当前方法的执行。

* `throws`：运用于方法声明之上,用于表示当前方法不处理异常,而是提醒该方法的调用者来处理异常(抛出异常).

  > 若该方法可能有多种异常情况产生，那么在throws后面可以写多个异常类，用逗号隔开。

### 异常注意事项

* 运行时异常被抛出可以不处理。即不捕获也不声明抛出。
* 如果ﬁnally有return语句,永远返回ﬁnally中的结果,避免该情况.
* 如果父类抛出了多个异常,子类重写父类方法时,抛出和父类相同的异常或者是父类异常的子类或者不抛出异常。
* 父类方法没有抛出异常，子类重写父类该方法时也不可抛出异常。此时子类产生该异常，只能捕获处理，不能声明抛出。

## 自定义异常

在开发中根据自己业务的异常情况来定义异常类

### 定义
自定义一个编译期异常: 自定义类 并继承于 `java.lang.Exception` 。
自定义一个运行时期的异常类:自定义类并继承于 `java.lang.RuntimeException`

* 并发：指两个或多个事件在同一个时间段内发生。
* 并行：指两个或多个事件在同一时刻发生（同时发生）

![](/assets/image/media/d21506ea83e11f85ddb52e8a829525a3.png)

一个程序运行后至少有一个进程，一个进程中可以包含多个线程（多线程程序）。多线程程序并不能提高程序的运行速度，但能够提高程序运行效率，让CPU的使用率更高。

* 线程调度：当系统只有一个CPU时，线程会以某种顺序执行多个线程
* 分时调度：所有线程轮流使用 CPU 的使用权，平均分配每个线程占用 CPU 的时间。
* 抢占式调度：优先让优先级高的线程使用CPU，如果线程的优先级相同，那么会随机选择一个(线程随机性)，

Java使用的为`抢占式调度`。设置线程的优先级